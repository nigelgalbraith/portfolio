{
  "nodes": {
    "Init": { "label": "Check user, setup logs, check Flatpak + Flathub" },
    "LoadConfig": { "label": "Detect model and load Flatpak config" },
    "CheckApps": { "label": "Check installed Flatpak apps" },
    "PromptAction": { "label": "Prompt: Install, Uninstall, or Cancel" },

    "InstallFlow": { "label": "Install missing Flatpak apps" },
    "UninstallFlow": { "label": "Uninstall installed Flatpak apps" },

    "Finish": { "label": "Rotate logs and finish" }
  },
  "connections": [
    ["Init", "LoadConfig"],
    ["LoadConfig", "CheckApps"],
    ["CheckApps", "PromptAction"],

    ["PromptAction", "InstallFlow"],
    ["InstallFlow", "Finish"],

    ["PromptAction", "UninstallFlow"],
    ["UninstallFlow", "Finish"]
  ],
  "classes": {
    "step": "fillcolor:#d9ead3,style:filled,shape:rect,fontcolor:black"
  },
  "class_map": {
    "Init": "step",
    "LoadConfig": "step",
    "CheckApps": "step",
    "PromptAction": "step",
    "InstallFlow": "step",
    "UninstallFlow": "step",
    "Finish": "step"
  }
}
