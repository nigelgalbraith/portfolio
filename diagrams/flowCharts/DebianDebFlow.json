{
  "nodes": {
    "Init": { "label": "Setup logs and check environment" },
    "LoadConfig": { "label": "Load model-specific DEB config" },
    "CheckPackages": { "label": "Check installed packages" },
    "PromptAction": { "label": "Prompt: Install, Uninstall, or Cancel" },

    "InstallFlow": { "label": "Download and install DEBs, start service if needed" },
    "UninstallFlow": { "label": "Uninstall DEBs and clean up" },

    "Finish": { "label": "Rotate logs and finish" }
  },
  "connections": [
    ["Init", "LoadConfig"],
    ["LoadConfig", "CheckPackages"],
    ["CheckPackages", "PromptAction"],

    ["PromptAction", "InstallFlow"],
    ["InstallFlow", "Finish"],

    ["PromptAction", "UninstallFlow"],
    ["UninstallFlow", "Finish"]
  ],
  "classes": {
    "step": "fillcolor:#ddebf7,style:filled,shape:rect,fontcolor:black"
  },
  "class_map": {
    "Init": "step",
    "LoadConfig": "step",
    "CheckPackages": "step",
    "PromptAction": "step",
    "InstallFlow": "step",
    "UninstallFlow": "step",
    "Finish": "step"
  }
}
